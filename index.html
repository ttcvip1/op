<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTT Signal Generator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1 {
            color: #4CAF50;
        }
        label {
            font-weight: bold;
        }
        input, button {
            margin: 10px 0;
            padding: 10px;
            width: 100%;
            max-width: 400px;
        }
        #output {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
            display: none;
        }
        .error {
            color: red;
        }
    </style>
</head>
<body>
    <h1>TTT Signal Generator</h1>
    <form id="auth-form">
        <label for="ttt-id">TTT ID:</label>
        <input type="email" id="ttt-id" placeholder="Enter TTT ID" required>

        <label for="password">Password:</label>
        <input type="password" id="password" placeholder="Enter Password" required>

        <button type="button" onclick="authenticate()">Authenticate</button>
    </form>

    <form id="signal-form" style="display:none;">
        <label for="assets">Assets (comma-separated, e.g., USDBDT-OTC, USDEGP-OTC):</label>
        <input type="text" id="assets" placeholder="Enter asset names">

        <label for="start-time">Start Time (e.g., 09:00):</label>
        <input type="time" id="start-time">

        <label for="end-time">End Time (e.g., 18:00):</label>
        <input type="time" id="end-time">

        <label for="days">Number of Days (Default: 5):</label>
        <input type="number" id="days" min="1" max="10" placeholder="Enter number of days (optional)">

        <button type="button" onclick="fetchSignals()">Fetch Signals</button>
    </form>

    <div id="output"></div>

    <script>
        const validTTTID = "triplettrader@gmail.com";
        const validPassword = "@Triple_T_Trader";
        const expiryDate = new Date("2070-12-10");

        function authenticate() {
            const tttID = document.getElementById("ttt-id").value.trim();
            const password = document.getElementById("password").value.trim();

            if (tttID === validTTTID && password === validPassword) {
                const today = new Date();
                if (today <= expiryDate) {
                    alert("YOUR ID APPROVED ✅");
                    document.getElementById("auth-form").style.display = "none";
                    document.getElementById("signal-form").style.display = "block";
                } else {
                    alert("ACCESS DENIED ❌\nThis TTT ID has expired. Please renew your subscription!");
                }
            } else {
                alert("ACCESS DENIED ❌\nInvalid TTT ID or Password. Please try again!");
            }
        }

        async function fetchSignals() {
            const assets = document.getElementById("assets").value.split(",").map(a => a.trim());
            const startTime = document.getElementById("start-time").value || "09:00";
            const endTime = document.getElementById("end-time").value || "18:00";
            const days = document.getElementById("days").value || 5;

            const params = new URLSearchParams({
                start_time: startTime,
                end_time: endTime,
                days: days,
                pairs: assets.join(",") || "USDARS_otc",
                mode: "normal",
                min_percentage: "90",
                filter: "q",
                separate: "1"
            });

            const url = `https://alltradingapi.com/signal_list_gen/qx_signal.js?${params}`;

            try {
                console.log(`Fetching from URL: ${url}`);
                const response = await fetch(url);

                if (response.ok) {
                    const data = await response.text();
                    console.log("Response Data:", data);

                    document.getElementById("output").style.display = "block";
                    document.getElementById("output").textContent = data;
                } else {
                    throw new Error(`HTTP Error: ${response.status}`);
                }
            } catch (error) {
                console.error("Error while fetching signals:", error);
                document.getElementById("output").style.display = "block";
                document.getElementById("output").innerHTML = `<p class="error">Error: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html>
